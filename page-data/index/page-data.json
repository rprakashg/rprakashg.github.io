{"componentChunkName":"component---src-pages-index-js","path":"/","result":{"data":{"site":{"siteMetadata":{"title":"rprakashg.github.io","author":"RAM GOPINATHAN"}},"allMarkdownRemark":{"totalCount":23,"edges":[{"node":{"excerpt":"In this post I will walk through how you can setup a Gitops process for building golden images based on RHEL using RHEL image builder tool. If you are not familar with Image Builder I will recommendâ€¦","html":"<p>In this post I will walk through how you can setup a Gitops process for building golden images based on RHEL using RHEL image builder tool. If you are not familar with Image Builder I will recommend reading this <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_a_customized_rhel_system_image/composer-description_composing-a-customized-rhel-system-image\">doc</a>\nKey goal here is to have a common consistent process to build system images that can be used for cloud, on-premises and edge deployments</p>\n<p>At a high level we are going to first provision a RHEL 9 based EC2 instance on AWS and then install and configure image builder on it and lastly we are going to configure this system as a self hosted runner which will be used to run those Github CI jobs that runs image builder commands to compose images based on a blueprint. You can find everything I'm covering in this article here in this github <a href=\"https://github.com/rprakashg-redhat/osbuild-gitops\">repo</a>.</p>\n<p>Lets get right into it</p>\n<h2>Provisioning Required Infrastructure for self hosted runner on AWS cloud</h2>\n<p>I've included some terraform scripts to provision the required infrastructure components in AWS. I have already cloned the github repo to my local machine and we are going to switch to <code class=\"language-text\">runner/provision</code> directory and kick off the provisioning by running the terraform commands listed below</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">terraform init\nterraform plan\nterraform apply</code></pre></div>\n<p>Terraform scripts executed successfully and we can see the information about the EC2 instance in output as shown in screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ac419cc9b2c38fa485953f44a501f0b/077b7/tf_output.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgUlEQVR42n1QXZOiMBAMSMAQvsQVCOSARYW93fP0AMWytsoH//9v6ovhZe/h9qFrpiczneomwzDger1iHEccDgfs93uN8/mMrutQFAXu97vmfd/DMIz/ghAC8hScpkkfHI9H7Ha7fwSllHg8Hpo/P9VH3+FyvuB2u2G6TDj9Pmmx0/GEoR8wDiPef77jufN5+8Twp8db94amaVBVFeq6RlmWGkmSzIKiFMhfC+RNjqzKsEpXyGvV1wLyVaqZwEu+gWwkkh8JqqaCyASyLIMQAmmaarEoimbBZcVANzYWngUrpLAiC6ZrworpXBW3AjXzTCxUT6jxveW4iBFEAfiSw7EdcObCcz34PEToR7rO/QpRqHbVjLkcnhfAVXuer96DENznoDYF6fYdurbT2bVti49fHyqjWllaI1dWhXhRtmL4/hKMUQ3HXoAtLV1dxTlzwCiDaZggz3Dj9VoHvN3ukCYbrNYlHK8FdRuFLWy+hUFLkIUEsb6AynlmZyC5imJD8BdybsihQPTVIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tfout\"\n        title=\"\"\n        src=\"/static/3ac419cc9b2c38fa485953f44a501f0b/5a190/tf_output.png\"\n        srcset=\"/static/3ac419cc9b2c38fa485953f44a501f0b/772e8/tf_output.png 200w,\n/static/3ac419cc9b2c38fa485953f44a501f0b/e17e5/tf_output.png 400w,\n/static/3ac419cc9b2c38fa485953f44a501f0b/5a190/tf_output.png 800w,\n/static/3ac419cc9b2c38fa485953f44a501f0b/077b7/tf_output.png 1166w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Configuring the self hosted runner</h2>\n<p>We are going to use Ansible to configure the self hosted runner. Switch to configure directory. Copy the public dns of EC2 instance from the terraform output and update the inventory file. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f6ea4ba2a22eaa858d21a94feb9d487/59f0d/ansible-inventory.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/ElEQVR42p2Q3W6EIBCFff/n2wvb1DWuRhRBEVBAwdOpJtv2qj+TfGGYOZzMkHWMoesYOO8xjhJCDBinCazv0ROcD2CkuXL+hJ3vum+1D7L89Y7bLcdbUZGZgpQG1jqs64rFWoQ9wvmAmCJ+E1lZVpimGWrWNJmConxZHRntWIRAWJZTmLaILUTsX9j8RaTekdJlWNcPjFLCGE2TWVg6nXPwe4KjuywKjE0DVnIM1QjZXAiCPwiqTUxi9w7HZVhDKXWaGWOgtYb3/mymGOH1jEC91R2goX9euW1bWnnCPM9PwxAC/htZ/nJH0/RomYCQGoOgP1z8p+I4/mT4DvibHOwKQrWJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inventory\"\n        title=\"\"\n        src=\"/static/2f6ea4ba2a22eaa858d21a94feb9d487/5a190/ansible-inventory.png\"\n        srcset=\"/static/2f6ea4ba2a22eaa858d21a94feb9d487/772e8/ansible-inventory.png 200w,\n/static/2f6ea4ba2a22eaa858d21a94feb9d487/e17e5/ansible-inventory.png 400w,\n/static/2f6ea4ba2a22eaa858d21a94feb9d487/5a190/ansible-inventory.png 800w,\n/static/2f6ea4ba2a22eaa858d21a94feb9d487/c1b63/ansible-inventory.png 1200w,\n/static/2f6ea4ba2a22eaa858d21a94feb9d487/29007/ansible-inventory.png 1600w,\n/static/2f6ea4ba2a22eaa858d21a94feb9d487/59f0d/ansible-inventory.png 2370w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Next we need to create an encrypted secrets file by running command below</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ansible-vault create vars/secrets.yml</code></pre></div>\n<p>Include following yaml snippet shown below</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">rhUser</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;specify>'</span>\n<span class=\"token key atrule\">rhPassword</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;specify>'</span></code></pre></div>\n<p>Store the VAULT password that was used in an environment variable.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export VAULT_SECRET=\"&lt;replace>\"</code></pre></div>\n<p>Run the ansible playbook as shown below. You can see the full ansible playbook <a href=\"https://github.com/rprakashg-redhat/osbuild-gitops/blob/main/runner/configure/configure-runner.yaml\">here</a> I'm using ansible certified content <a href=\"https://github.com/redhat-cop/infra.osbuild/tree/main/roles/setup_server\">rhcop-osbuilder</a> to setup the server with image builder</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ansible-playbook -vvi inventory --vault-password-file &lt;(echo \"$VAULT_SECRET\") configure-runner.yaml</code></pre></div>\n<p>Playbook completed successfully.  See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ff2f2f0988428bd6845a20e2daebd11b/aa37b/configure-output.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABh0lEQVR42m2S6ZKkIBCEsYdTLlFQO/b9n7M2i3K2ZyL2xxdZpEXKpe5roXMsdF3CfS80eHyKf//wT3ijS93795wXvW/x3u+F1DkUTIUQ0fMUeMx6P17v0CE6v42PN576Qp8qxVEplmp1Ex5vmyXxxYvR0RrAaqGWnNPkvXlU/1BDaqueUnKUs6da/NScJcx7IfhP7b0lrb/I2i8y5oNzgurdYckOS/aT8+Ta0XE8PvS6HM5JdAxLrWn8UE/tXWNHMmZU2zw1bHFvvG1uhuII2Dt2UQ6d9MdrZrJVhO56aoqa4orAP32nUQudrdLVCh01U98KjQ0Kn+teK+2ZvTK9jLO0VmH7C4UgcO3cwit8YWULsaYE4kcjCOGFy3hhAnR6C74tU3/VqwSr1hL2HhGacBmoc6RcpK41IjyiMSGUNSJ4xaXY/2KMJXUcgfbdE+uxS90a4/7deJ6vQIjRIljjB+YXIQgqJXlPjEVjyjjcaDB5RQOeTPBk1kAOuq4ghvl0jEG//cBj5i+IQvhX4wx55QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"output\"\n        title=\"\"\n        src=\"/static/ff2f2f0988428bd6845a20e2daebd11b/5a190/configure-output.png\"\n        srcset=\"/static/ff2f2f0988428bd6845a20e2daebd11b/772e8/configure-output.png 200w,\n/static/ff2f2f0988428bd6845a20e2daebd11b/e17e5/configure-output.png 400w,\n/static/ff2f2f0988428bd6845a20e2daebd11b/5a190/configure-output.png 800w,\n/static/ff2f2f0988428bd6845a20e2daebd11b/c1b63/configure-output.png 1200w,\n/static/ff2f2f0988428bd6845a20e2daebd11b/29007/configure-output.png 1600w,\n/static/ff2f2f0988428bd6845a20e2daebd11b/aa37b/configure-output.png 3464w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Next thing we need to do is navigate to the settings for the GitHub repo and under actions/runner click on <code class=\"language-text\">new self hosted runner</code> option to add a new self hosted runner. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a41b08ed545eeedcb008b6cc4b39280e/70d4c/addnewrunner.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACG0lEQVR42l1T2XLaQBDkMRUbhIRudEvoRBzGuBxX/v+3OtMjLwl56Fp2lunp6RmtNrsIXlxg7YR4tQOBj7W7h5XMCNIWSdkiLzvUhxFxflBkzYC06lE0IwqJJ/Ju8leWG8NPKpCYgZetD9vPUE0faI53dPM7+tMd7XRF3Z9xGM+ohyvy7g3lcBNcpXCDV8l7EJbdLJUmIY0XwiBDKglRdUJUTijbIwIpavuJduOEBaygxMbPsQ1yrCXviTBvJvj7UmWTkGrZUpzX+LF2BDuJhXCjQt9fLA+WGyHKauzCVGOPllk1qwcNLh4G2Hp7IRxETa6qWZQxnkwkWPT/mBJuZAAkNA8M2kEqbc6qiPDiEo7EfooyVfiNf+9GzMqSAdA/V9Q4Il8hybSBvrlR/gDjtr+8G5i7Gaq23IwX8aPRigxSKRX2MuFmuAiWCcd5K15XqpjgbwO2T6VKyCnyVOlOoNVINF0/Mb/9wnj+wCCrM5zvSkxU3UmLElk9qteqkMz0MExrbXHxMZSki5B9Yb59Ybp8agEmFyQRsuJwRCaDI1lS9jqD77URQtl4ktILqtQizfLHvSCUxWVBtmZ7ibwnei7+ZbI62bNCekMys4d/d3PxK0hq8fggaPVkJ9xbM6inoZCQHlKhGT2J2+mG8/tv9bA73rTFxbeTqueeLuS1gp3qUMz3a8gMobZbdPBkD3dhrq0Z8E6YPSWMh38A0pFwHDd7Cy8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"addrunner\"\n        title=\"\"\n        src=\"/static/a41b08ed545eeedcb008b6cc4b39280e/5a190/addnewrunner.png\"\n        srcset=\"/static/a41b08ed545eeedcb008b6cc4b39280e/772e8/addnewrunner.png 200w,\n/static/a41b08ed545eeedcb008b6cc4b39280e/e17e5/addnewrunner.png 400w,\n/static/a41b08ed545eeedcb008b6cc4b39280e/5a190/addnewrunner.png 800w,\n/static/a41b08ed545eeedcb008b6cc4b39280e/c1b63/addnewrunner.png 1200w,\n/static/a41b08ed545eeedcb008b6cc4b39280e/29007/addnewrunner.png 1600w,\n/static/a41b08ed545eeedcb008b6cc4b39280e/70d4c/addnewrunner.png 2548w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>We can pretty much skip all the steps in the download section because the ansible script that configures the self hosted runner already does that. Copy the configure command and ssh into ec2 instance and run that command. See screen capture below.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/646232bba7c21a672d5886546077368c/5cd17/configsh.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/UlEQVR42qWSTU7EMAyFEztx/jrTlplDICGhgQU77n+sh20pQoAAFRafYtX1y7PjcLlcse9nnO/uMa6vaPsLeDyB+g00buD2DF4fQQ8CXgitNvTenVorRMSZcbBEaw3LqBg9o7eEIuTUwnoqmSEsyDkjpeTFpRQXICKEEN6xZNWkwZwgSfSCDikVWQoisf4YEWL4WPgdzKyFanlZIOq2jIGijrM6MUdfHPzGLCIVJhUxosYxRv9u5yFBa9nmcqjoJ06nkz+KOTVs0DOeHBJcdHYmum0b1nV15iUmfrjlbd1crPgrs2MjMCz+U8smNnfs3/O0xZ6zsjYPr8kn3gDO+OT+gm5UtwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"configsh\"\n        title=\"\"\n        src=\"/static/646232bba7c21a672d5886546077368c/5a190/configsh.png\"\n        srcset=\"/static/646232bba7c21a672d5886546077368c/772e8/configsh.png 200w,\n/static/646232bba7c21a672d5886546077368c/e17e5/configsh.png 400w,\n/static/646232bba7c21a672d5886546077368c/5a190/configsh.png 800w,\n/static/646232bba7c21a672d5886546077368c/c1b63/configsh.png 1200w,\n/static/646232bba7c21a672d5886546077368c/29007/configsh.png 1600w,\n/static/646232bba7c21a672d5886546077368c/5cd17/configsh.png 3564w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Switching to Github repo we can see that the new self hosted runner was added to the repo. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e5b645dcdc1ba8d58c294032d4942576/0bd07/newrunner.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABQ0lEQVR42pWQ23aCMBBFaZcoIIRLEu4KiSAUxfoB/f/fOk1C8fLYh70mM5M5cxJrvt0xXWZcrjcTh3HC+HUx8dT1ODbijaaVb0h1R/Y9WnmCkB2smJcgSQaWH+FHHLZLsNtHsB2CrTpvvRBblbtBYvrWxn1ie7B3BBs7wMenrnmwXMLghQx+nCLJDipmCNQCL+TgZYOsbuESCqLqMc3hBNTkbkjh+Amirkb1M4BdG9OzgiQ3IiErkVYCa76PUvC6Ry6/QasBcVojUuilsSL5g0uBbB5B+zMCNWfpYV8NE1pADDMOcjSiWpCWAqWYkB3Oyq0AK1oDVd+zwvIWPJeI6PI6a3WjBWslxorm4TDJahTHTom1izPtkldm4cLyMj2zvuwhqBtVezZnzVrXf7nWXnuvvNaegrxGP90RKwdaXLNu/Q+/kYzIIEkmi+oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"newrunner\"\n        title=\"\"\n        src=\"/static/e5b645dcdc1ba8d58c294032d4942576/5a190/newrunner.png\"\n        srcset=\"/static/e5b645dcdc1ba8d58c294032d4942576/772e8/newrunner.png 200w,\n/static/e5b645dcdc1ba8d58c294032d4942576/e17e5/newrunner.png 400w,\n/static/e5b645dcdc1ba8d58c294032d4942576/5a190/newrunner.png 800w,\n/static/e5b645dcdc1ba8d58c294032d4942576/c1b63/newrunner.png 1200w,\n/static/e5b645dcdc1ba8d58c294032d4942576/29007/newrunner.png 1600w,\n/static/e5b645dcdc1ba8d58c294032d4942576/0bd07/newrunner.png 2898w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>We are going to ssh back into the ec2 instance and start the runner by running the run.sh script as shown in screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/625caa8e2e63a787eac38aaba0d872eb/ee787/startrunner.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAUklEQVR42pXNQQ7AIAhEUTSRECCiB6j3v+U0smjanV28zIoPmRvcHWYGVYWIfDBzIqIzopLBfby3tYZaazqOvK1rofeOMQYiIqNzzudJKeVX8AaqqT7ZTivrtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"startrunner\"\n        title=\"\"\n        src=\"/static/625caa8e2e63a787eac38aaba0d872eb/5a190/startrunner.png\"\n        srcset=\"/static/625caa8e2e63a787eac38aaba0d872eb/772e8/startrunner.png 200w,\n/static/625caa8e2e63a787eac38aaba0d872eb/e17e5/startrunner.png 400w,\n/static/625caa8e2e63a787eac38aaba0d872eb/5a190/startrunner.png 800w,\n/static/625caa8e2e63a787eac38aaba0d872eb/c1b63/startrunner.png 1200w,\n/static/625caa8e2e63a787eac38aaba0d872eb/29007/startrunner.png 1600w,\n/static/625caa8e2e63a787eac38aaba0d872eb/ee787/startrunner.png 2022w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>We are now ready to kick of a github CI job to build a RHEL system image. For demonstration purposes I'm using a sample blueprint from <a href=\"https://github.com/osbuild/rhel-for-edge-demo/tree/master/blueprint\">osbuild</a> community. The github actions workflow will use image builder to build rhel for edge image. Check out the <a href=\"https://github.com/rprakashg-redhat/osbuild-gitops/blob/main/.github/workflows/generate.yaml\">CI workflow</a> to see all the image builder commands we are running to build RHEL for edge system image using a sample blueprint</p>\n<p>We can ssh into EC2 instance and see that the compose job is running. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/066896611a2be9019049d3c9364d6743/22284/compose-status.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.999999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAP0lEQVR42jWJSQoAMQgEJ7gED4qI5P8/7RBhDgVdXd85B92NqkJm4nlEzH6fu8PMICJQVey9pxERmHnaz1oLF5cvFrScodVvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"composestatus\"\n        title=\"\"\n        src=\"/static/066896611a2be9019049d3c9364d6743/5a190/compose-status.png\"\n        srcset=\"/static/066896611a2be9019049d3c9364d6743/772e8/compose-status.png 200w,\n/static/066896611a2be9019049d3c9364d6743/e17e5/compose-status.png 400w,\n/static/066896611a2be9019049d3c9364d6743/5a190/compose-status.png 800w,\n/static/066896611a2be9019049d3c9364d6743/c1b63/compose-status.png 1200w,\n/static/066896611a2be9019049d3c9364d6743/29007/compose-status.png 1600w,\n/static/066896611a2be9019049d3c9364d6743/22284/compose-status.png 2428w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Job runs for about 10 mins and image out is saved as workflow artifact. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d89eddf61e283fd5677ab7f74f9ce188/87cc4/joboutput.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzElEQVR42o2SaW+bQBCGF3xgMGDu24Cxk7hqpaqfqoScjnFTqer//zdvZ9ZHLQe1+fBoZmdmZ+dY0W3e0D3tsHnY4uWxk/zofuHn7jdeX97w+LBDe7fFfbtFe7ulc4fnpz3t9w3uiPvbVzzT/bbtIOZ1g+tPn1EulqiaJRZXNwiTDH4UI4gSuH4Iy3FhHzjprgePYqI0hxdE8uxQrNCmFOQl0IwZDNuH6ZDTCaGbHtg3NhxMSB+TzlK3fIzIJgY6lPEUqmZCGU0hRgbEkAibGldfvmG1/oooX8jksyCTUuLGmPmp1G2Str+3m2Q/Yp0h4uoa5WqNIKvgp6VMxkR5gyCt4MUlTC8lOZd2lk6YS90+PHSO8PMacdkgzGqEaS2NbpghLVeIqeKoWMIKCqlzspBlUp6SnVfKiCCvZJAbFZJjCwFd4rkKZQx1bEAZ6lBpTsoBlefXg4iptWJxgyktg+GEOi3HDriCWC5hMLFo4PrHkBVdlK47Prx036ZPbfK2harRZif/53IGMiFVNZzYsoWBZmGk2/L7fIR3CbltnmnRrOU2Le/9Jv9Fb4WciL8Mf40+Pz/KMcxx7qct913gRMl8+XfrF1UcH+3z/wFN3kIoJ8doigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"joboutput\"\n        title=\"\"\n        src=\"/static/d89eddf61e283fd5677ab7f74f9ce188/5a190/joboutput.png\"\n        srcset=\"/static/d89eddf61e283fd5677ab7f74f9ce188/772e8/joboutput.png 200w,\n/static/d89eddf61e283fd5677ab7f74f9ce188/e17e5/joboutput.png 400w,\n/static/d89eddf61e283fd5677ab7f74f9ce188/5a190/joboutput.png 800w,\n/static/d89eddf61e283fd5677ab7f74f9ce188/c1b63/joboutput.png 1200w,\n/static/d89eddf61e283fd5677ab7f74f9ce188/29007/joboutput.png 1600w,\n/static/d89eddf61e283fd5677ab7f74f9ce188/87cc4/joboutput.png 2936w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>As mentioned earlier I used a blueprint for RHEL for edge but the same approach can be leveraged for building RHEL system images for use in Google, AWS, Azure as well as for onpremises use as well.</p>\n<p>Hope that helps. If you have any questions about this post please comment or reach out and I'm happy to help.</p>\n<p>Thanks,\nRam</p>","id":"779cf1b3-1720-5564-baad-4e1586d1b819","frontmatter":{"title":"Building RHEL Golden images leveraging GitOps and Self Hosted Github runner on AWS","date":"May 30, 2024","tags":["RHEL","GitOps","AWS","Edge"]},"fields":{"slug":"/building-rhel-images-gitops/"}}},{"node":{"excerpt":"This year OpenSource Summit 2024 is going to be hosted in Seattle. If you are going to be there come by Red Hat booth and chat with our experts about Opensource. If you come by during the times listedâ€¦","html":"<p>This year OpenSource Summit 2024 is going to be hosted in Seattle. If you are going to be there come by Red Hat booth and chat with our experts about Opensource.</p>\n<p>If you come by during the times listed below you can chat with me</p>\n<table>\n<thead>\n<tr>\n<th>Date</th>\n<th>Time</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Tuesday April 16th</td>\n<td>3 - 5PM</td>\n</tr>\n<tr>\n<td>Wednesday April 17th</td>\n<td>10.25 AM - 1PM</td>\n</tr>\n<tr>\n<td>Thursday April 18th</td>\n<td>1 - 3.30PM</td>\n</tr>\n</tbody>\n</table>\n<p>Some of the topics that you can chat with me about:</p>\n<ul>\n<li>Kubernetes</li>\n<li>Service Mesh and Istio</li>\n<li>k8s Fleet Management</li>\n<li>Software Supply Chain Security</li>\n<li>Infra as Code</li>\n<li>Application Modernization</li>\n<li>Graph API</li>\n<li>Design First API Development</li>\n<li>Containers &#x26; Microservices</li>\n<li>Backstage</li>\n<li>Crossplane</li>\n</ul>\n<p>Also be sure to bring your running shoes if you are a runner. I plan to be there for the 5k fun run as well.</p>\n<p>Check out this events <a href=\"https://red.ht/OSSNA2024\">page</a> to learn about everything Red Hat is doing at the conference and also to learn more about the event.</p>\n<p>Looking forward to seeing you there...</p>\n<p>Thanks,\nRam</p>","id":"eff7df37-d6c9-5f91-bbde-1fe6d8781b8c","frontmatter":{"title":"Opensource Summit 2024","date":"April 10, 2024","tags":["containers","platform","kubernetes","openshift","redhat"]},"fields":{"slug":"/opensource-summit-2024/"}}},{"node":{"excerpt":"In this post I'm going to walk through how you can use role base access control to segregate cluster life cycle management responsibilities between dedicated teams. Few reasons you might want to doâ€¦","html":"<p>In this post I'm going to walk through how you can use role base access control to segregate cluster life cycle management responsibilities between dedicated teams. Few reasons you might want to do that are:</p>\n<ul>\n<li>Operating at scale, you have operational responsibilites for lots of clusters</li>\n<li>You might have different SLAs with internal groups who are your customers running workloads on platform</li>\n<li>Reducing the blast radius. For ex. accidently upgrading a cluster that you shouldn't have etc...</li>\n</ul>\n<p>Sample scenario I have set up is as follows. I've defined two cluster sets to group clusters provisioned for respective teams as shown in the table below</p>\n<table>\n<thead>\n<tr>\n<th>ClusterSet Name</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>digital</td>\n<td>Group all k8s clusters owned by digital group</td>\n</tr>\n<tr>\n<td>telco</td>\n<td>Group all k8s clusters owned by telco group</td>\n</tr>\n</tbody>\n</table>\n<p>I've also setup some test users in my OKTA tenant and RHACM roles they are mapped to on the HUB cluster as shown in the table below</p>\n<table>\n<thead>\n<tr>\n<th>User Name</th>\n<th>Member Of</th>\n<th>Role</th>\n<th>RHACM Role</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Mark Smith(<a href=\"mailto:msmith@acme.org\">msmith@acme.org</a>)</td>\n<td>cluster-admins</td>\n<td>Hub Cluster Admin</td>\n<td>cluster-admin, open-cluster-management:cluster-manager-admin</td>\n</tr>\n<tr>\n<td>Scott Adams (<a href=\"mailto:scott.adams@somecompany.com\">scott.adams@somecompany.com</a>)</td>\n<td>digital-ops</td>\n<td>Admin for spoke clusters owned by digital group</td>\n<td>open-cluster-management:managedclusterset:admin:digital</td>\n</tr>\n<tr>\n<td>Michael Mitchell (<a href=\"mailto:mmitch@somecompany.com\">mmitch@somecompany.com</a>)</td>\n<td>digital-dev</td>\n<td>View all spoke clusters owned by digital group</td>\n<td>open-cluster-management:managedclusterset:view:digital</td>\n</tr>\n<tr>\n<td>Nick Jonas (<a href=\"mailto:nick.jonas@somecompany.com\">nick.jonas@somecompany.com</a>)</td>\n<td>telco-ops</td>\n<td>Admin for spoke clusters owned by telco group</td>\n<td>open-cluster-management:managedclusterset:admin:telco</td>\n</tr>\n<tr>\n<td>Joe Jonas (<a href=\"mailto:joe.jonas@somecompany.com\">joe.jonas@somecompany.com</a>)</td>\n<td>telco-devs</td>\n<td>View all clusters owned by telco group</td>\n<td>open-cluster-management:managedclusterset:view:telco</td>\n</tr>\n</tbody>\n</table>\n<p>As you can see from the above table Mark smith is the super user. Scott has operational responsibilities for managing clusters owned by digital group and Nick has operational responsibilities for clusters owned by telco group.</p>\n<p>We are going to first login to RHACM hub as a super user in this scenario Mark Smith. We can see that Mark can pretty much do everything on hub</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47eb58ad283f9e5183389c744de2a3f0/286e5/acmsuperuser.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVR42o2QS07DMBCGcw0eEkmThm4RarsBiQMURG+AhMQhyoImTTgXl+ASIBo1bRw7dvIzY6dZsGKkT/94PC/bu7u9wWw6xWQywSURxzHG48hqGIYIgsDi+37vj+ATrMEotBpFEeU69cIwxnQ2x+p1hbf1GkmSWLJNijR1JD3pHziWZRny/B3pZoMsz+FdXc/x9PyCxnQ4mmmBg8G/reth807PAywelhBSoaoERHXAV7HHx+c3ilKgLEuKV5BSQimFhrDaNBaOS1lTXUVnBe/k7AKL+0doWsuiNalB17oCPtc0rK4liqLAfl+RXw9DGt1YeAjnDg2VNraR5ku6ENSACznpICQE8bPdYrfbWezGtJHS1NS4TXmBvuESXed+gZVdp90QN7T98dmq0cOfaaPRtu5lrL9iHb7HsC43fwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"acmsuperuser\"\n        title=\"\"\n        src=\"/static/47eb58ad283f9e5183389c744de2a3f0/5a190/acmsuperuser.png\"\n        srcset=\"/static/47eb58ad283f9e5183389c744de2a3f0/772e8/acmsuperuser.png 200w,\n/static/47eb58ad283f9e5183389c744de2a3f0/e17e5/acmsuperuser.png 400w,\n/static/47eb58ad283f9e5183389c744de2a3f0/5a190/acmsuperuser.png 800w,\n/static/47eb58ad283f9e5183389c744de2a3f0/c1b63/acmsuperuser.png 1200w,\n/static/47eb58ad283f9e5183389c744de2a3f0/29007/acmsuperuser.png 1600w,\n/static/47eb58ad283f9e5183389c744de2a3f0/286e5/acmsuperuser.png 2525w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>When Scott logs in we can see that he can only see a list of clusters that are part of clusterset digital. For demonstration purposes I've created an OpenShift cluster called <code class=\"language-text\">digitaldev</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0cb062eda9432765a5bf0c2e951dbfab/ba40d/digital-admin.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAz0lEQVR42oWPSwrCQBBE5yT+/4hbUdAT6DIx8b4eQRCJ4t6NRnSmpxPLaWP8LhwoqocuXtGqWaujUCxhOp3A9z14nufcx+wx/5Nkw/kcQRAgDEOo/mCEwXCM5WoNaxlEBtoYnLSF5QRJkiBN07u/9PlnJ20Yhhiq3emh0epis91BntEa54vGYn3A/mhgHJyIvoC/kowUq3K1iVKl8QSSA0ijgKy1d88VxzEuriy7JCshJneJ5DTS6xVKYAKNok0GdEEBMfPT81l2+T7Xe7H4DZ5fS7uNAZ0wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"digitaladmin\"\n        title=\"\"\n        src=\"/static/0cb062eda9432765a5bf0c2e951dbfab/5a190/digital-admin.png\"\n        srcset=\"/static/0cb062eda9432765a5bf0c2e951dbfab/772e8/digital-admin.png 200w,\n/static/0cb062eda9432765a5bf0c2e951dbfab/e17e5/digital-admin.png 400w,\n/static/0cb062eda9432765a5bf0c2e951dbfab/5a190/digital-admin.png 800w,\n/static/0cb062eda9432765a5bf0c2e951dbfab/c1b63/digital-admin.png 1200w,\n/static/0cb062eda9432765a5bf0c2e951dbfab/29007/digital-admin.png 1600w,\n/static/0cb062eda9432765a5bf0c2e951dbfab/ba40d/digital-admin.png 2524w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Scott whose role as mentioned earlier is an admin for clusters owned by digital group he is allowed to create new cluster or import existing clusters into <code class=\"language-text\">digital</code> cluster set as shown in the screen capture above. Switching to <code class=\"language-text\">cluster sets</code> tab we can see that Scott is not allowed to create a new <code class=\"language-text\">ClusterSet</code> and its disabled as shown in screen capture below.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c759d16d6459b008c9d3319fe151e94/ec9b3/digital-admin-clusterset.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVR42qWPS2rDMBCGfYw8Fl3UCSRtSrvoJiEQCGSdtrlBCeQe3tjG9lVtL2xLI8l/NRKkDnRRyMDPaF6fZoLV8hlhOMd6s0UURUiS1CpBHMdI0/RfKooCWZYhz3MEu/0BL2/v+D5foLRGj/sseFq9Yjx9wPHjC1VVoSxLNE0DIkLXdU5t61XXtfXtNX8rgU4IBI+zBUYM/Dw5iDHGNfAwSYK2W0ulIEhBWc89SmmXH0rYXpYHTjxQkobpe9vghyVJaKOv5/S2JqV0/i9jsAP6kxlIDsTiIqnfeJgfxvwBby3sufz+Ab6MmBYm01JbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"digitaladmin\"\n        title=\"\"\n        src=\"/static/5c759d16d6459b008c9d3319fe151e94/5a190/digital-admin-clusterset.png\"\n        srcset=\"/static/5c759d16d6459b008c9d3319fe151e94/772e8/digital-admin-clusterset.png 200w,\n/static/5c759d16d6459b008c9d3319fe151e94/e17e5/digital-admin-clusterset.png 400w,\n/static/5c759d16d6459b008c9d3319fe151e94/5a190/digital-admin-clusterset.png 800w,\n/static/5c759d16d6459b008c9d3319fe151e94/c1b63/digital-admin-clusterset.png 1200w,\n/static/5c759d16d6459b008c9d3319fe151e94/29007/digital-admin-clusterset.png 1600w,\n/static/5c759d16d6459b008c9d3319fe151e94/ec9b3/digital-admin-clusterset.png 2539w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Now lets login as Michael Mitchell who is a developer in digital group. As you can see from the screen capture below, Michael is only allowed to view clusters that are part of <code class=\"language-text\">digital</code> cluster set but he cannot create a new cluster or import an existing cluster.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a0399a559c484c139fa694a161bdda0b/d1442/digital-dev-view-clusters.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA80lEQVR42o2QTU7DMBCFfQ/UqqVJU1UVCxYVC3Y5QRIpcFigEhRRcZgoP1X8M3YeHrfpAljU0qcZe6z3ni2SRYzJdIY0TZFlWSDP80t/DUVRoCxLPD+VEMvVBnGyxsvuHdY5EBkYY2CtxTAMV2OtgzIWYvvwiM3dPb4O3+AlpYRSGm3boqqqULXWwcB5w5OAC/0Iz4gIhrzgbbTCzWSOj/3nRdD4oZQKsu/DvveVRY/HDl3XQXpD3jNkCZp8b7QPIiGi5RrTWYT9WXBMQ3RyZcYEPFNKhS8ZCcnOledivki8YIzXt1044GfWdf0vTdP84fedH56kkPIw7AEEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"digitaldev\"\n        title=\"\"\n        src=\"/static/a0399a559c484c139fa694a161bdda0b/5a190/digital-dev-view-clusters.png\"\n        srcset=\"/static/a0399a559c484c139fa694a161bdda0b/772e8/digital-dev-view-clusters.png 200w,\n/static/a0399a559c484c139fa694a161bdda0b/e17e5/digital-dev-view-clusters.png 400w,\n/static/a0399a559c484c139fa694a161bdda0b/5a190/digital-dev-view-clusters.png 800w,\n/static/a0399a559c484c139fa694a161bdda0b/c1b63/digital-dev-view-clusters.png 1200w,\n/static/a0399a559c484c139fa694a161bdda0b/29007/digital-dev-view-clusters.png 1600w,\n/static/a0399a559c484c139fa694a161bdda0b/d1442/digital-dev-view-clusters.png 2538w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Switching to cluster sets tab we can see that Michael can only view the clusterset but cannot create a new cluster set. This is similar to experience for Scott since he is only an admin for digital group and doesn't have permission to create new cluster set.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43e61fd7f100d774b0893a96e4281b3a/c6162/digital-dev-view-clusterset.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA90lEQVR42pWQb26CQBDF9xBNSq3RKljUSGKbmJg2vYQ9CxxJUbEnk2/8W3bhlRnEYOsH3eSXmfB4byYjhv0BLNOC8dzFavUNz3XhnvA879zfinDeFpg6c7xYNvbBAfSk0ijLkrn3icXyE8uPL7yOZwiCHyitcTyGiOMYUsoL8ryuURQhy7J/OiHsyQzD0RgPjx2sNz5PSZKkMudQSnFtSFKJVOask7mtN71w5u+8ndHpYbvbcyBNJ1MYhmzU1QmKouDtCe6rAH3q2whzNAFhPPXgb+tA+rltSmV6cSe6LQ0l7e93MTDtOrDa0Pd35w2bMKrXuKaR7xfCi9I+wqnqOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"digitaldev\"\n        title=\"\"\n        src=\"/static/43e61fd7f100d774b0893a96e4281b3a/5a190/digital-dev-view-clusterset.png\"\n        srcset=\"/static/43e61fd7f100d774b0893a96e4281b3a/772e8/digital-dev-view-clusterset.png 200w,\n/static/43e61fd7f100d774b0893a96e4281b3a/e17e5/digital-dev-view-clusterset.png 400w,\n/static/43e61fd7f100d774b0893a96e4281b3a/5a190/digital-dev-view-clusterset.png 800w,\n/static/43e61fd7f100d774b0893a96e4281b3a/c1b63/digital-dev-view-clusterset.png 1200w,\n/static/43e61fd7f100d774b0893a96e4281b3a/29007/digital-dev-view-clusterset.png 1600w,\n/static/43e61fd7f100d774b0893a96e4281b3a/c6162/digital-dev-view-clusterset.png 2166w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>I've created another cluster called <code class=\"language-text\">telcodev</code> for telco group. This cluster is part of telco cluster set.</p>\n<p>We can login to RHACM hub using as Nick Jonas and can see that Nick can only see clusters that are part of telco cluster set. In this scenario <code class=\"language-text\">telcodev</code> cluster deployed on AWS. Nick can also create new clusters or import clusters into the <code class=\"language-text\">telco</code> cluster set</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c39f32655a29b3a7b1d269a78ebd8ea7/52a2d/telco-ops-clusters-view.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/klEQVR42pWOy0oEMRBF8xc+QMXHaDfMKIqCO10IDXY7DTNiI7gUBP/WD3DhzlW39iupVDPXpMIIutLA4VYlN7dKTaIY8UGE8eQQSZIgTVMhc9xk2XcfuA7q75ekGfI8Rz6diqqLyyscHZ/h8ekZn02LYWDHAEMM4gX+euywADvUyek5trZHKO4fQJahDWGwBq/vDV7eGum11mBmwQ/7XVtrQWSdMtR+NMbK2gZm8zuZwBxM5EzGGGckUf+pbVt0XSd4n2zGVvB33qd29iKsrm9idlv8CCByIa72fdggbOrx70uk1wZ938siancUh8B5gar6cFQoy1L0P9R1LaFff8KIhI0ID8cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"telco-ops-clusters-view\"\n        title=\"\"\n        src=\"/static/c39f32655a29b3a7b1d269a78ebd8ea7/5a190/telco-ops-clusters-view.png\"\n        srcset=\"/static/c39f32655a29b3a7b1d269a78ebd8ea7/772e8/telco-ops-clusters-view.png 200w,\n/static/c39f32655a29b3a7b1d269a78ebd8ea7/e17e5/telco-ops-clusters-view.png 400w,\n/static/c39f32655a29b3a7b1d269a78ebd8ea7/5a190/telco-ops-clusters-view.png 800w,\n/static/c39f32655a29b3a7b1d269a78ebd8ea7/c1b63/telco-ops-clusters-view.png 1200w,\n/static/c39f32655a29b3a7b1d269a78ebd8ea7/29007/telco-ops-clusters-view.png 1600w,\n/static/c39f32655a29b3a7b1d269a78ebd8ea7/52a2d/telco-ops-clusters-view.png 2534w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Switching to the cluster set tab we can see that Nick cannot create or delete cluster set as shown in screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1f16373d48689552222894587b69d95/0f7bd/telco-ops-clustersets-view.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVR42p2QTU7DMBCFcwmkQiW6gAJJyJ8qlkhIXABUtalgjxBXpMsmuU9+bCdx8phxUtHSHZE+vTfP47Ed6yEIsQhDeJ6HkNQPBu/5PlxSx3VhO4xjcFgpMzkrrfnUy3ujKIIVRgvMb228vC7xvd1it0uQJANpmiLNMmQE+2z0ps7Sk5y99fj0DPs+wMfnF1rdQagaWmv897PuXB9nkymWqxhCVJBSoq5rtG1rlBFKoZIKRVFAkd/nhwhZQ6oG1vWNg/PpDPHmnW6oze2EEMjz3AzVJutGtMm6rjtBE01DA6/mNiYXl1jHbxQCfY+xqUfTNpT9Pr+nRd7Eephxpemgo4ErGsjP4SfvEVIc1czfnqoaflNZlsb/AMxOwrN4ugiUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"telco-ops-clusterset-view\"\n        title=\"\"\n        src=\"/static/a1f16373d48689552222894587b69d95/5a190/telco-ops-clustersets-view.png\"\n        srcset=\"/static/a1f16373d48689552222894587b69d95/772e8/telco-ops-clustersets-view.png 200w,\n/static/a1f16373d48689552222894587b69d95/e17e5/telco-ops-clustersets-view.png 400w,\n/static/a1f16373d48689552222894587b69d95/5a190/telco-ops-clustersets-view.png 800w,\n/static/a1f16373d48689552222894587b69d95/c1b63/telco-ops-clustersets-view.png 1200w,\n/static/a1f16373d48689552222894587b69d95/29007/telco-ops-clustersets-view.png 1600w,\n/static/a1f16373d48689552222894587b69d95/0f7bd/telco-ops-clustersets-view.png 2540w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Lets now login as Joe Jonas who is a developer in the telco group, As you can see from the screen capture below Joe is only allowed to view clusters that are part of <code class=\"language-text\">telco</code> group and cannot create new clusters or import existing clusters into the hub</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25c943d1fb6a3600ce543f8b9a067d96/fe27b/telco-dev-view.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABKElEQVR42p2Q20rDQBCG9yEsChaSmKSlpR7qrUKo4OF9bKpSm4NBBF81hBRybDbJ7+wmRS+80YGPncz8+Wd22eL6CjeWhfn8AqY5gjkaQ9d1GIRuGFAU5RdUKKranfStUn6iaTBIz86nM6iajrv7B6zXr9g4G8KBQ3ieR/hwXa/LXbevfeNSLQgC+P4bPN8Hsxa3mJ1d4v3jEyLatsF/ou1hwmxwNIS9epGNNE2RFwXi7RZhGCKOYyRJgoJqeZ6jLEtJVVXgnMtc9ArqVbsd2HhyioPDY9hPnWFFoqZpwOsadY/4UZximCTLpE4Er6nXcBpWkDkZ6uYEAzJc2s9SkJFYbPKT/XZyk559TwzIsi7nvAYzRlMyHOJxuZLrR1Ekr/lXxLOIZb4AQUqxaOq4fkAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"telco-dev-clusters-view\"\n        title=\"\"\n        src=\"/static/25c943d1fb6a3600ce543f8b9a067d96/5a190/telco-dev-view.png\"\n        srcset=\"/static/25c943d1fb6a3600ce543f8b9a067d96/772e8/telco-dev-view.png 200w,\n/static/25c943d1fb6a3600ce543f8b9a067d96/e17e5/telco-dev-view.png 400w,\n/static/25c943d1fb6a3600ce543f8b9a067d96/5a190/telco-dev-view.png 800w,\n/static/25c943d1fb6a3600ce543f8b9a067d96/c1b63/telco-dev-view.png 1200w,\n/static/25c943d1fb6a3600ce543f8b9a067d96/29007/telco-dev-view.png 1600w,\n/static/25c943d1fb6a3600ce543f8b9a067d96/fe27b/telco-dev-view.png 2532w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>In the next post I will cover how you can use RBAC to control who can create publish governance policies.</p>\n<p>Hope that helps,\nRam</p>","id":"a6577d02-fd1b-5ece-b649-1e2a2534a99b","frontmatter":{"title":"Using RBAC to segregate cluster lifecycle management responsibilities between dedicated teams","date":"April 03, 2024","tags":["containers","platform","kubernetes","openshift","redhat"]},"fields":{"slug":"/rbac-cluster-lifecycle-rhacm/"}}}]}},"pageContext":{}},"staticQueryHashes":["1611934721","2366241629"],"slicesMap":{}}