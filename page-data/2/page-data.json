{"componentChunkName":"component---src-templates-post-list-js","path":"/2/","result":{"data":{"site":{"siteMetadata":{"title":"rprakashg.github.io","author":"RAM GOPINATHAN"}},"allMarkdownRemark":{"totalCount":35,"edges":[{"node":{"excerpt":"There are lots of benefits to design first approach to API development in a large organization with many development teams compared to code first which is more suited for developers. With design first…","html":"<p>There are lots of benefits to design first approach to API development in a large organization with many development teams compared to code first which is more suited for developers. With design first you first create the API definition, review it with potential stakeholders and ensure there is a strong alignment and understanding between all before you write a single line of code.</p>\n<p>In this post I will cover how Red Hat developer hub can be used to practice design first API development. For the purposes of this article I have deployed an instance of Red Hat Developer hub on an EKS cluster. There are three main parts to this solution</p>\n<ul>\n<li>\n<p>Golden path template to add a new API definition. API designers can create the API definition file using swagger editor then use the template to add the newly created API definition to git repo. For demonstration purposes I've created a repository called <a href=\"https://github.com/rprakashg-redhat/apis\">apis</a>. Currently this repository contains a sample petstore api definition. We are using this Golden path template to capture required metadata for the newly created api definition and use that to generate a backstage catalog entity kind = API. Additionally both openapi specification and the backstage entity definition is added to the git repository and a PR is opened with specified reviewers. Check out the full template <a href=\"https://github.com/rprakashg-redhat/rhdh-templates/blob/main/templates/new-api-definition/template.yaml\">here</a>. All the golden path templates used in this post can be found in this <a href=\"https://github.com/rprakashg-redhat/rhdh-templates\">repo</a></p>\n</li>\n<li>\n<p>We are going to use a static location entity will tell backstage to automatically ingest all API kind entities into software catalog. You can check out this file <a href=\"https://github.com/rprakashg-redhat/apis/blob/main/all-apis.yaml\">here</a>. When PR is merged into the repo, I'm using a github actions workflow to update the targets list to add the newly added api entity so it can be ingested into software catalog in backstage.</p>\n</li>\n<li>\n<p>Once the newly added API definition is ingested into the software catalog in backstage development teams can create a service using any of the golden path templates available and code the implementation for the newly definied API. I've added a template to build RESTFul backend services in Golang and we are going to use that for this demo.</p>\n</li>\n</ul>\n<p>Lets look at some of the app configurations for red hat developer hub instance. For catalog I've sepecified two locations 1) For golden path templates and 2) API definitions as shown in the snippet below</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">catalog:\n    import:\n    entityFileName: catalog-info.yaml\n    rules:\n    - allow: [Component, System, API, Resource, Location, Domain, Template]\n    locations:\n    - type: url\n        target: https://github.com/rprakashg-redhat/rhdh-templates/blob/main/all-templates.yaml\n    - type: url\n        target: https://github.com/rprakashg-redhat/apis/blob/main/all-apis.yaml</code></pre></div>\n<p>We are going to open up a browser and navigate to URL of red hat developer hub instance I have running on EKS. My instance is already configured for Github auth and I have logged in with my Github credentials. Lets navigate to catalog and we can see that the petstore api entity is already ingested into software catalog as shown in screen capture below.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7fd2d829f22171bb26135e82d628a2ce/c2d13/softwarecatalog.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42oWPS0vDUBSEsxeKgghtaiyiotCNeXnbPJqbJpGobWkQGlP7AFcu/SXaBkRRRMH/OZ5EI1p8LD7OcDl35oywV68j2JeRnnSR9iPMwiPMgkPccI5ry8Lc4ZiTTn0ft50u7no93NPew2CAx9EYT8TzZIqXZIjXOIZQrkqoVao41XVEmoZI1ZBYJs6aTcSMIW40kJBOyHxIxufc/ZgcYwoZeR4uun1cTS4xIS1s7+xC2txCkxZ004RCn/3jDhpOC4bLCRfMtmF5PgzeftftNpwgAKMQw3HghSFaZG5nhqJUQ1XagEsfTcMAYwdQZDlHVZScXKtqjpK90dS+ampWTKG0sooK1fYpoUVpZnZlZvIPchb6w7uwVFqGuC7Bo3MzQ4tq/La8aLhIbrhWFqlyjaqyzwpFtb8o9r6haXgDGiDvfxeZ85wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"catalog\"\n        title=\"\"\n        src=\"/static/7fd2d829f22171bb26135e82d628a2ce/5a190/softwarecatalog.png\"\n        srcset=\"/static/7fd2d829f22171bb26135e82d628a2ce/772e8/softwarecatalog.png 200w,\n/static/7fd2d829f22171bb26135e82d628a2ce/e17e5/softwarecatalog.png 400w,\n/static/7fd2d829f22171bb26135e82d628a2ce/5a190/softwarecatalog.png 800w,\n/static/7fd2d829f22171bb26135e82d628a2ce/c1b63/softwarecatalog.png 1200w,\n/static/7fd2d829f22171bb26135e82d628a2ce/29007/softwarecatalog.png 1600w,\n/static/7fd2d829f22171bb26135e82d628a2ce/c2d13/softwarecatalog.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>I've downloaded another sample api definition file for spotify apis. We will now use the software template to add the spotify API definition. We can do that by clicking <code class=\"language-text\">Create</code> sidebar navigation option which will bring up a list of golden path templates. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2926dacd740c7df8c5c891700070ad9a/c2d13/create-component.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABkklEQVR42m2RS0sbYRSG8xdKS6w21Z2borlMkvnmFieZpDOTmHiJJHjDKFhaIbFuiqsiSH9Dd111Ubpp9/0BgUDdFEoRXHTVy594PDNeCOLiYb5zhnnec75JzE6l+BY2OOuuMxKGzSWGNZ/hQplR2eP784AzP+RHp8vPnV1+7e5xvv+Ci8Ehv98c8+/kHf/fnvJ3cMSffp/ExOQTPNvGL5WwNA1HKUqmicrlUNkshvSMQgFT1zHlaRWLMab0XcdlbeuAbu81YaON5zgkJlNP0Q0DXUTP8nmOKhW+ttt86nT43Ovxvl7nY7PJl40NPmxukRdRWsIyERI4Pz93ixJP4mHyMdVqlSAIcEW2XK7wanmV/ZUVeq0We4uLvJTzgQRsizgSamPkZYiInASYslkstGVUJRMW5EW5WiNoLeH5Prbr4oUhCxJY8ipYUmt3hDfcCh88SpLOZNCkkRUMGVspHV3uzDAtbMtCyTkKNAwr/vA+srJ+LExNz1CQy74SqVgU1TdE64zXRfkh+nXAOFHPcRwuASFK/e5fVxGGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create-component\"\n        title=\"\"\n        src=\"/static/2926dacd740c7df8c5c891700070ad9a/5a190/create-component.png\"\n        srcset=\"/static/2926dacd740c7df8c5c891700070ad9a/772e8/create-component.png 200w,\n/static/2926dacd740c7df8c5c891700070ad9a/e17e5/create-component.png 400w,\n/static/2926dacd740c7df8c5c891700070ad9a/5a190/create-component.png 800w,\n/static/2926dacd740c7df8c5c891700070ad9a/c1b63/create-component.png 1200w,\n/static/2926dacd740c7df8c5c891700070ad9a/29007/create-component.png 1600w,\n/static/2926dacd740c7df8c5c891700070ad9a/c2d13/create-component.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Select the <code class=\"language-text\">New API definition</code> template from the list and fill in name for the API, description and for specification paste the swagger from the api definition file. Specify owner and click next. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f16cdcf796e8dbc045dd02f7f9c17aa1/c2d13/newapidef1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVR42pWQ3UrDQBCF8zKaoI14b1KTzY9K25hlk03z26RN9LnEiihIERHJlY923CRFsAjai4/dnZlzzrBSPFKxmXq4u7jCPbGxthysx+d4ONPwODbwZBI8Ow5eKMUmCPHKOd7mMd7LCh91g7a5Qbuq0cYxPqsK0vHJKcrlClwMUSGgTBDw4f6NeId8Wx96PvsJDSJMZh6kI7Fh3dwizRZI0rw/s7xEXuyQbyl+7xWLJZgIkg5kGYwxRFEkCgy+fw3LsqBpGnRd/zfdfKeTDhUFnIciqUCSpMJ4jqk3g2Xbe0EErusKQ1kR/xbBdi9hGAYIIX3SvnS63nCkqmBRholHQczB0DTNP+nmduk2/QITKwyqlhdNAgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"newapidef1\"\n        title=\"\"\n        src=\"/static/f16cdcf796e8dbc045dd02f7f9c17aa1/5a190/newapidef1.png\"\n        srcset=\"/static/f16cdcf796e8dbc045dd02f7f9c17aa1/772e8/newapidef1.png 200w,\n/static/f16cdcf796e8dbc045dd02f7f9c17aa1/e17e5/newapidef1.png 400w,\n/static/f16cdcf796e8dbc045dd02f7f9c17aa1/5a190/newapidef1.png 800w,\n/static/f16cdcf796e8dbc045dd02f7f9c17aa1/c1b63/newapidef1.png 1200w,\n/static/f16cdcf796e8dbc045dd02f7f9c17aa1/29007/newapidef1.png 1600w,\n/static/f16cdcf796e8dbc045dd02f7f9c17aa1/c2d13/newapidef1.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Next provide information about the git repository where all api definitions files are stored. I'm going to select the apis repo and enter reviewers and PR branch name. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c30772853efff24aafdca30e83700af4/c2d13/apidefinition2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR42p2QSwvCMBCE+2d8VYt48aS2TTZNsLUWfID1dRAE//8PGCcqgqKXHr7DZrM7sxOM+xFuxQIHpbCLY+ySFHVKZjHqOME+IewdrMXROmIfnJzDaT7H+YWvL3mOIByOUG22cEWBGQffaPVZU+QX0xcTCiciCLq9EFVZIjMGonVjNEVtlnFh2Ee5rCDcLmKgtTRCKUHmF7a7PaxXa1jmY+hSUa0JKR36+aDV6cAx5JQ5KD42xZ/svMNBFKE+X5EvVzCiH7af5//HO/H/vvEZ3gF7gPrjwyXY2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"apidef2\"\n        title=\"\"\n        src=\"/static/c30772853efff24aafdca30e83700af4/5a190/apidefinition2.png\"\n        srcset=\"/static/c30772853efff24aafdca30e83700af4/772e8/apidefinition2.png 200w,\n/static/c30772853efff24aafdca30e83700af4/e17e5/apidefinition2.png 400w,\n/static/c30772853efff24aafdca30e83700af4/5a190/apidefinition2.png 800w,\n/static/c30772853efff24aafdca30e83700af4/c1b63/apidefinition2.png 1200w,\n/static/c30772853efff24aafdca30e83700af4/29007/apidefinition2.png 1600w,\n/static/c30772853efff24aafdca30e83700af4/c2d13/apidefinition2.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Click Next to review everything and click create. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/c2d13/apidef3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVR42oVQ7Q6CMAzcqwhoNMH/fAQGITjD18aM7/8op52y1EXjj0uvTXu9VkRJgqqqYIxxWNfV4VvOo7XW82VZME0T+r6HiJK9F9wGtNZekDjPeZ0vm+cZSimIXRw7Qc2EQoch5wu2Grl8CUZvwWDjxjfQiZyHOc0Mw0AOE9R17Rwadh5FOoOaxnH8AP0r5NTnHB6OJ1zVBV3XQTYNyrJEURQ+/kKe5x/Isgxt20Kk6RmLvcPqGwZZo3kWpZR/QcMhyNQDdiwBabfZdOoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"apidef3\"\n        title=\"\"\n        src=\"/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/5a190/apidef3.png\"\n        srcset=\"/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/772e8/apidef3.png 200w,\n/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/e17e5/apidef3.png 400w,\n/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/5a190/apidef3.png 800w,\n/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/c1b63/apidef3.png 1200w,\n/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/29007/apidef3.png 1600w,\n/static/3d7c16a4d13ae1ca5030d7236d0ac2b5/c2d13/apidef3.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Scaffolder will now execute all the actions defined in the template and you can see link to newly opened PR shown as outputs. <strong>Ignore errors because I put myself as reviewer which is why github was complaining because author cannot also be a reviewer</strong>. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cea9749d0aaa4dfbbe1c630dae5d363e/c2d13/scaffolder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABP0lEQVR42qWS30vDMBDH+5/IENmcoLSF1jZr1x9p2sRt9kGnMOfDFDf/J0HFMZiCiMwH/7qvl6APgqjow4e7S+6+uSRniShCnSQYJCn63S7ZBP0wxF7I0AsD9BiDIl+RrWl/WJboRTEk60B1IiiqV+TLIDB71mjHxrI/wBUXuC4r3JQSt7zAXcYxL0osKomFVFgeHOL+6BgPxOPoBE9n53iezrCaXWJ1McXL+BSvkwmsVnsLSimkaYqEukuJnHOzJmWFqqpMnBcFuEb7mjxHRuTvMRcFhO6w1W6j3h9ACGGSCirSVh/wQZZlP6LzdK217Qaoh2NEHYYuvVEcx6bT34h8Kbi+0cRuwOA4DlzXNZbRB5gr/UVwrdEgIQe27Rgx27b/J9hsbSKgL/d8Hz7heR5CGpuIxuE79NN8gta06BtHwyHthxcukQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"scaffolder\"\n        title=\"\"\n        src=\"/static/cea9749d0aaa4dfbbe1c630dae5d363e/5a190/scaffolder.png\"\n        srcset=\"/static/cea9749d0aaa4dfbbe1c630dae5d363e/772e8/scaffolder.png 200w,\n/static/cea9749d0aaa4dfbbe1c630dae5d363e/e17e5/scaffolder.png 400w,\n/static/cea9749d0aaa4dfbbe1c630dae5d363e/5a190/scaffolder.png 800w,\n/static/cea9749d0aaa4dfbbe1c630dae5d363e/c1b63/scaffolder.png 1200w,\n/static/cea9749d0aaa4dfbbe1c630dae5d363e/29007/scaffolder.png 1600w,\n/static/cea9749d0aaa4dfbbe1c630dae5d363e/c2d13/scaffolder.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>I'm going to click on the PR link to view the PR. We can see that our github actions workflow kicked off and it updated the location entity and added the new api to the list of targets. Workflow also updates the PR with a comment to let users know that this change was made to the PR. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9578380eb29ac953bf30a73cfab1cd0a/c2d13/pr1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVR42o2RO2/DMAyEs7Z5WJb1lmzLcmKncYaiyNj//7eulIAUGgK0w4GDeB951O7EDYo6g0OjYM8T5s8HXNzQ+QXMrmA6oVETWpPAVSj9TWfx6yUdmIL2E3bHVqPWiWnYfoEdF3RmRCM8jtwVMdnT2wwmXIHUvn0joV18AaTJNkyQBOM6ECTDdEnQ6R6t9GWbfwH31DjYEeN0hRsupDNBhhIzR8xVkekZ909gviEPHsJHaJvgI0HHC4QdKLotNQ8RZiixXwLzVrXeuYTdVsT7HX26QoW53JFR1FZ5GLqhclPZsPa9nQRkBua7PJUj+ZDw8f3A+HWjn17h0w1h3mDjAk/bOgLWntqb334A+ZyxMBtnNU8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pr\"\n        title=\"\"\n        src=\"/static/9578380eb29ac953bf30a73cfab1cd0a/5a190/pr1.png\"\n        srcset=\"/static/9578380eb29ac953bf30a73cfab1cd0a/772e8/pr1.png 200w,\n/static/9578380eb29ac953bf30a73cfab1cd0a/e17e5/pr1.png 400w,\n/static/9578380eb29ac953bf30a73cfab1cd0a/5a190/pr1.png 800w,\n/static/9578380eb29ac953bf30a73cfab1cd0a/c1b63/pr1.png 1200w,\n/static/9578380eb29ac953bf30a73cfab1cd0a/29007/pr1.png 1600w,\n/static/9578380eb29ac953bf30a73cfab1cd0a/c2d13/pr1.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>We can also check out the files changed in the PR. See screen capture below. Cool thing here is API developers, API consumers, API designers involved in this API can all collaborate on the PR together.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f82872aa3aba8dfca093fb0793d07d93/c2d13/filesinpr.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABBElEQVR42o2QyU7DMBRFs2FIqDM1gwfi2E1SB5qBCCEhlrDi/z/o8hKxYVHaxdGx5Puerp7HlUGyL3C/i+H/ErAUPktw47Oz3AbhlrkLou29uuQVvMPzCK4sklwh5QZRpsDiAmFSbv6PXZyDUW7NxoWEsh28ghqmRYVS9xCm35aGeUUBjYh8iUxYFKoFf3LQywme1B3iXKLrBjRugG3J9RGGUNRcSnMZYSB4jZpmvCgVW912GnCcFth+RGcO9GnBtYWor2SdaRy8B5aBlRKPX6/QHwvyU4/QWUTugJh8LZEz4D0t3NMd8rpG+z3Bfb7BvM+QM91kas4zNxAv7R/40kCPPX4AKq63V3I/D4UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"filesinpr\"\n        title=\"\"\n        src=\"/static/f82872aa3aba8dfca093fb0793d07d93/5a190/filesinpr.png\"\n        srcset=\"/static/f82872aa3aba8dfca093fb0793d07d93/772e8/filesinpr.png 200w,\n/static/f82872aa3aba8dfca093fb0793d07d93/e17e5/filesinpr.png 400w,\n/static/f82872aa3aba8dfca093fb0793d07d93/5a190/filesinpr.png 800w,\n/static/f82872aa3aba8dfca093fb0793d07d93/c1b63/filesinpr.png 1200w,\n/static/f82872aa3aba8dfca093fb0793d07d93/29007/filesinpr.png 1600w,\n/static/f82872aa3aba8dfca093fb0793d07d93/c2d13/filesinpr.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>I'm going to go ahead and merge the PR and delete the branch and in few minutes we should see this newly added API ingested into software catalog in backstage. See screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e05c4be133191f5ed6a7ea22b208d82e/c2d13/catalog2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42p2RXUsCQRSG959Ehakksa4f+zW7M/vtiqlrltJFCnbTTUG/poskKkIiqLvoov/2dmZLEgmKLl7OcOadd54zoySui4wL9D0PXfFZe46DrhSz89phjORg4AmMWykyP0DP89Fxea42+VJDxyiJoRzvqbj3Alw5HNd+iHkUYy58zB0XN8LDLR2+o95DP8PiYIjF8BCPoxGeTiZ4np3iZTbD2/kl3s8u8DqdQtkplmDbNjRNQ7PZRJK0wDmHIFqPaDlVqSCKIIhKUM8PfIRhmPddmnB/cIRsPEGatqGUKxXEcQxOGw5RWTaDQfiGYXxL12HTyKZlQZdrApBBy33btmBSDYKAAncriOg2ScTIWK1Wc9p1rfblet2nqmoermwXCmg0GrmhVqv9WzLUogmUjc0t1Ot1CtR+JPurJFAeWCyVYZommvQ2+pfk5/wmfcW/PMMYwwcydxWQL8UoIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"catalog2\"\n        title=\"\"\n        src=\"/static/e05c4be133191f5ed6a7ea22b208d82e/5a190/catalog2.png\"\n        srcset=\"/static/e05c4be133191f5ed6a7ea22b208d82e/772e8/catalog2.png 200w,\n/static/e05c4be133191f5ed6a7ea22b208d82e/e17e5/catalog2.png 400w,\n/static/e05c4be133191f5ed6a7ea22b208d82e/5a190/catalog2.png 800w,\n/static/e05c4be133191f5ed6a7ea22b208d82e/c1b63/catalog2.png 1200w,\n/static/e05c4be133191f5ed6a7ea22b208d82e/29007/catalog2.png 1600w,\n/static/e05c4be133191f5ed6a7ea22b208d82e/c2d13/catalog2.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>We can also click on the <code class=\"language-text\">spotify</code> API and see overview and definition. You can see swagger UI rendered for the spotify web api.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a41ec5dff8beda70fd7d9df81da2900/c2d13/spotifyapi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABU0lEQVR42m2Rz07CQBDG+y4iYAJ4IdBSZNvtdvsHGoptAQ+EQzF69mDisxiDRg8YjTF68e0+Z2usJfHwy+zM7HwzO6vN28fY+QFumYU77mDrSmzpfG8O8cAYHm2OJyGwi2d4TlO8pBleF0u8rdd4zzf42CjO8bla4SvPoTVbHYgggGlZf9g2htzGicPJWvs5BTUasFEFBmM0AnMcaI3mEaSU4CTicF4gHAHfDzGJxpAepxwvcwrO9/0iRvXSdaEd1A5hmib6/T50XS/s0BwgS2awLYZet0vxHvT+DwblDVMnjOL+L6qO0aRavdGEoB1Z9BSbJrHoCSKMsby4xjhO4NC5ipicQkQpuAyooaqxC1S9qyas1RsVQbsUTPIrhHFKAsQ4KXGjjJiTYPi/YKvdQUCfohwpPbiCw59mmF/eIEqW8GJiuijxY2J2Bm8SFztT+6/yDZ5AAkBuzviJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spotify\"\n        title=\"\"\n        src=\"/static/6a41ec5dff8beda70fd7d9df81da2900/5a190/spotifyapi.png\"\n        srcset=\"/static/6a41ec5dff8beda70fd7d9df81da2900/772e8/spotifyapi.png 200w,\n/static/6a41ec5dff8beda70fd7d9df81da2900/e17e5/spotifyapi.png 400w,\n/static/6a41ec5dff8beda70fd7d9df81da2900/5a190/spotifyapi.png 800w,\n/static/6a41ec5dff8beda70fd7d9df81da2900/c1b63/spotifyapi.png 1200w,\n/static/6a41ec5dff8beda70fd7d9df81da2900/29007/spotifyapi.png 1600w,\n/static/6a41ec5dff8beda70fd7d9df81da2900/c2d13/spotifyapi.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Next we will use the software template for building backend services in go and provide an implementation for the newly created spotify web api. Click create and select the <code class=\"language-text\">Go Rest Backend</code> template. Fill in all the required information and create to scaffold new backend service in go which will provide implementation for the newly created API definition. We make sure for <code class=\"language-text\">provided APIs</code> select the newly added <code class=\"language-text\">spotify</code> API from the list as shown in screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be7bb0fd906ed6a69da798cb8271a987/705cc/spotify-service1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42qWU207CQBCG+wSeQA7KlVGDMZC0hrbQhdAjPdMKhafw/S9/Z9ZoUEGpXnyZdtv+/Wd2dpSJruGJMHUdY8PA6InuNQ0TITAej2EYJnR9BI3WDHpumqaMmqpCGwygctRUDIdDjNQBFMf14Hk+4nCBKsuQxzGyNEXCke45xvkSWVEiTWL4iwVSer6gaAkLge9jbju0Hkod5e72Dt3rHma2j2VRIGYBwnVdzOdz2LZ9ENdx5Hu7KDe397hotiCmM2y3W0RRRH/y4NOfmd3r3bVDKP3HARqtDtkXWK/XMpXdj4MgqIVy339As93BdDaTgnmeS9hpGIb1BdtXPZycNyjlKaqqkiLskuEXfkpvb8osdnrRhBBTbDYbKbivbseinDUupSDXsKBdZme8W3WdfTh8F+SU32vHbcPC/xZcrVZSjNP+rT2OEizL8l/1+1xDS8ij9ldn3xxOLEue0WNOQw3B5G0z/ODbGT2WTyknaYaImjmiqWETLFwX2dgM92FZbfGcZHiJaZRFMRyf3R4g2I/S6l7L4SC4sZc096gXC5p/BaXP48njJt+D6zpv4+sLr4BfdThDWJ4HAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spotify\"\n        title=\"\"\n        src=\"/static/be7bb0fd906ed6a69da798cb8271a987/5a190/spotify-service1.png\"\n        srcset=\"/static/be7bb0fd906ed6a69da798cb8271a987/772e8/spotify-service1.png 200w,\n/static/be7bb0fd906ed6a69da798cb8271a987/e17e5/spotify-service1.png 400w,\n/static/be7bb0fd906ed6a69da798cb8271a987/5a190/spotify-service1.png 800w,\n/static/be7bb0fd906ed6a69da798cb8271a987/705cc/spotify-service1.png 1071w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Hope this was helpful. As always reach out to me if you have questions about this post or want to learn more about Red Hat developer hub and how it can improve developer productivity</p>\n<p>Thanks,\nRam</p>","id":"8059169e-c3e9-543b-9139-6f25e9cafd39","frontmatter":{"title":"Practicing Design First API Development with Red Hat Developer Hub","date":"March 25, 2024","tags":["backstage","idp","kubernetes","eks","amazon","redhat","developer"],"author":"Ram Gopinathan"},"fields":{"slug":"/design-first-with-rhdh/"}}},{"node":{"excerpt":"Observability service is one of the capabilities provided by Red Hat Advanced Cluster Management for Kubernetes that helps platform engineering teams monitor and observe the health and capacity of…","html":"<p>Observability service is one of the capabilities provided by Red Hat Advanced Cluster Management for Kubernetes that helps platform engineering teams monitor and observe the health and capacity of clusters across entire kubernetes fleet.</p>\n<h2>Purpose</h2>\n<p>Kubernetes cluster sprawl is real, we see customers deploying clusters on-premises, multi cloud and even on edge locations to run workloads. With this comes a set of management challenges for platform engineering teams. Being able to monitor the health and utilization of clusters across the entire k8s fleet is one of the challenges platform engineering teams have to solve. Typically this involves deploying a central monitoring infrastructure, select a monitoring solution (Prometheus is most common) and ensure provisioned clusters are configured to send telemetry data to this central infrastructure so they can monitor the health and utilization of clusters across the entire k8s fleet in one place. Observability service in RHACM solves this problem so our customers don't have to. We also understand that not all customers use Openshift for running workloads also some have multiple k8s distributions and as long as those clusters are imported into hub, this feature should work well as long as they are complaint with upstream k8s</p>\n<h2>Summary of what's configured when you enable observability service</h2>\n<p>When you enable the observability service, a Prometheus/Thanos stack is deployed on the hub cluster and data collector components are deployed on every managed cluster for collecting and aggregating telemetry information.\nAll required k8s resources are provisioned for persistent storage for various components of thanos. Object store is provisioned for metrics storage.\nAdditionally a Grafana instance is provisioned with a set of useful dashboards that platform teams can use to monitor the health and utilization. A Grafana dashboard loader sidecar is also deployed with Grafana instance to load dashboards into Grafana. Platform teams can create additional dashboards and add them to a configmap and these dashboards will be automatically loaded into Grafana instance by the Grafana dashboard loader sidecar. Prometheus alertmanager can also be configured to send monitoring alerts to slack, pagerduty etc.</p>\n<p>Diagram below shows various components configured when observability service is configured on hub cluster</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06bb1f4cc0d3a5de38295ec634847189/ab75a/acm.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe1NCg//xAAWEAEBAQAAAAAAAAAAAAAAAAABEAD/2gAIAQEAAQUCxG//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAQUAAAAAAAAAAAAAAAABABEgUWGR/9oACAEBAAE/IUcxL2U3Y//aAAwDAQACAAMAAAAQkM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhMRBRcf/aAAgBAQABPxB4VZG61cQBAyMPUEXk+zQho4//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"observability\"\n        title=\"\"\n        src=\"/static/06bb1f4cc0d3a5de38295ec634847189/4b190/acm.jpg\"\n        srcset=\"/static/06bb1f4cc0d3a5de38295ec634847189/e07e9/acm.jpg 200w,\n/static/06bb1f4cc0d3a5de38295ec634847189/066f9/acm.jpg 400w,\n/static/06bb1f4cc0d3a5de38295ec634847189/4b190/acm.jpg 800w,\n/static/06bb1f4cc0d3a5de38295ec634847189/e5166/acm.jpg 1200w,\n/static/06bb1f4cc0d3a5de38295ec634847189/ab75a/acm.jpg 1428w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Automating enabling the observability service</h2>\n<p>Observability service is not enabled by default, steps to enable this feature is documented very well in RHACM product documentation <a href=\"https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.10/html/observability/enabling-observability-service\">here</a>. I recommend reading that. I wrote an ansible playbook that automates this. You can check out the ansible playbook <a href=\"https://github.com/rprakashg-redhat/rhacm-demos/blob/main/observability/configure-multiclusterobservability.yaml\">here</a></p>\n<p><a href=\"https://asciinema.org/a/yfJKLHpEXkar3lzNibOgNSgW0\"><img src=\"https://asciinema.org/a/yfJKLHpEXkar3lzNibOgNSgW0.svg\" alt=\"asciicast\"></a></p>\n<p>We should now be able to log back into hub cluster and see link to Grafana instance in the clusters view under infrastructure section as shown in screen capture below</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b3624ad3a011e24f69d5e023a772fabf/c2d13/observability-acm.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVR42nWQS0/DMBCE80tI0zbpQ4gTAipagbhxK1UP/GSu3KgUCZqeaMmLPGzHdoZ1QipVgkifZr0b70xieYMhzmwH9uUjejdL9GdPcAj7egmHzqPbFUbzlvFihQnhUc/MDO58DW+xbnRy/wzrajbH4u4Br5sPJEwjLhXiQkKoGnmFI5kg/cXUKW9JWI2vokaY0T1qWN74HOPpBYIggHmUYCjKEi9+irQUkBWHVrRRK6DWp2jd9LWUhECVf8Pq9T0M3QnetzvQGJwxMFHhM8poMUNJpFmBknGqSwghWrgAFxycDBvlvOlbNi10vSm2wa5NSG6SnLUiNc5US6mamtMSc+6Q9I6gZGbWGVm242JACX3fp8+rkGWUrCiaNH9hZh15nh8x94xaZpn5h2+bTdOIoghhGOJwOPyLmcdxfEKSJNjv9/gBX2nUotDM8toAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"observability\"\n        title=\"\"\n        src=\"/static/b3624ad3a011e24f69d5e023a772fabf/5a190/observability-acm.png\"\n        srcset=\"/static/b3624ad3a011e24f69d5e023a772fabf/772e8/observability-acm.png 200w,\n/static/b3624ad3a011e24f69d5e023a772fabf/e17e5/observability-acm.png 400w,\n/static/b3624ad3a011e24f69d5e023a772fabf/5a190/observability-acm.png 800w,\n/static/b3624ad3a011e24f69d5e023a772fabf/c1b63/observability-acm.png 1200w,\n/static/b3624ad3a011e24f69d5e023a772fabf/29007/observability-acm.png 1600w,\n/static/b3624ad3a011e24f69d5e023a772fabf/c2d13/observability-acm.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Clicking on the link will bring up the Grafana instance that is configured with set of dashboards. Grafana instance is configured to be able to login with the same credentials you use to login to Openshift/Hub cluster. To illustrate that this works with other k8s distributions I've provisioned an EKS cluster called <code class=\"language-text\">toolscluster</code> in <code class=\"language-text\">us-east-2</code> region and have imported that cluster into ACM hub</p>\n<p>Including screen captures for few of the observability dashboards that we ship</p>\n<p>Dashboard below shows compute resources by cluster. You can select cluster from the dropdown selection at the top and report will be refreshed</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31ae9d91b35c22c6d935a35a09f80681/c2d13/observability-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJElEQVR42l1R2XLCMAzMJxAghy/5SJyUo6GUdvj/L9vKCmUYHnZ2rVtyRWGC0p4R0HQWm22H+h27XnhTt0/bpu6w3Sm0nNMpwr41UqdyfsBpuaLpreDz6wc+ZWwbhXE+In+cRbsw4Hq7o9Mkccv1F3GcUe97DNMRE8d12qHqDUG7iFY5gXZBHI2yUNajNwwbRFuf0OoSZyWn+NpH3D8qF0dY7l541Yl5YB6hfYRhFL9hu6LA7yTQFJ9asaaUsCwzF+REw92c54Ihg+IEYjaUZAJlo0xTeEV40+tbM1NMqA7nG2I+cFLilTJ3HnnFdR3HxTUN4nNx5kkntoeHbZAYw7qg6BJXXb7vmE8XWXFdO69r8C0pjS86yymKtvyRBcVXzvGq/wD2Rbxx4FUaygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"observability1\"\n        title=\"\"\n        src=\"/static/31ae9d91b35c22c6d935a35a09f80681/5a190/observability-1.png\"\n        srcset=\"/static/31ae9d91b35c22c6d935a35a09f80681/772e8/observability-1.png 200w,\n/static/31ae9d91b35c22c6d935a35a09f80681/e17e5/observability-1.png 400w,\n/static/31ae9d91b35c22c6d935a35a09f80681/5a190/observability-1.png 800w,\n/static/31ae9d91b35c22c6d935a35a09f80681/c1b63/observability-1.png 1200w,\n/static/31ae9d91b35c22c6d935a35a09f80681/29007/observability-1.png 1600w,\n/static/31ae9d91b35c22c6d935a35a09f80681/c2d13/observability-1.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Dashboard below shows compute resources by node</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c48383a32639c09bf2231d9e948ef919/c2d13/compute-resources-node.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVR42k1Ry3LTQBDUL4CNLUsraXf1flhWcA4UBy7JgRMUVdz4Z4yTcuKCgiiQCvxF07MWVA5d3dMzszs76x2/PeBw/Inr23tc3d5hdzNid/0dnw/kwx329L/c3GPv9Igr+uLtHLPv+As/xkeM42/sv/6B17QDyrJF3fQoyg5RbBCqBEppqMggmqAc9Mn/B9ZqkyFIDJbs0TaHN/cVni8CzJchZoRowewJL1YR5n7o9FNI/tkLHxfDa1wOb5DbBl7V9qg7TslJq3aDslmjkpgT1+sz8mbye9b0p5zEk5bch7fv8On9R7w8O4eX85lp3kCnlWOT1bCOG8Yt/RJ5tUZWdDBTjaVvMtE10qLFkuuYBTECstf2W94yuERkSizDBD73ESY5Voq7CWPqzMWnnMYqsvBFE6soRRBbHsadJim8bjh3EyidOWPBm6RRYmmWWHQ45fxIDtSuRiCHCS8C0Zxw2L5Ct9ki4dOStOCPWTYbxLYgW9cc8/dikzutdPo/J7B8tniihf8CMwsKOXc8ftUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"resourcesbynode\"\n        title=\"\"\n        src=\"/static/c48383a32639c09bf2231d9e948ef919/5a190/compute-resources-node.png\"\n        srcset=\"/static/c48383a32639c09bf2231d9e948ef919/772e8/compute-resources-node.png 200w,\n/static/c48383a32639c09bf2231d9e948ef919/e17e5/compute-resources-node.png 400w,\n/static/c48383a32639c09bf2231d9e948ef919/5a190/compute-resources-node.png 800w,\n/static/c48383a32639c09bf2231d9e948ef919/c1b63/compute-resources-node.png 1200w,\n/static/c48383a32639c09bf2231d9e948ef919/29007/compute-resources-node.png 1600w,\n/static/c48383a32639c09bf2231d9e948ef919/c2d13/compute-resources-node.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>and Dashboard below shows a clusters overview.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4772fea9c6f9ffbfc41104e7d2b91c9/c2d13/clusters-overview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42m1Qy07DQAzMlQOPNkr2vZtN0qSUIg6tEGoVpLYc4QoS8Bf9fw1elxaQOFhej71jz2QhTmFdg9GlwPlZjqsLgXEuMRqL/2NUnt7jXKAUhsKiVA4uNMhCPYU0FW6eFnh4H3D/vIaLPaSrYKoJlIswoSWsg7QJ606YpWOUjbA0pwljQls1EMajH+a4e1lgup5THehzYFLOFOr41gFCer4oLfjdMz4SoSdC7flKTY1Q97C0/YCFQyaS1BfKQ9c1fD9BM5v9mStTj67MQnM4e/m2wm6/w/CxYcna1+BekkJyYzcjwoDl6wrb/RaPnxsi7HjO81yNpDZLp5bG0QYyVlsU0nCU2nHNWbnv+gcrJM0qe8ILwpPCLLbXcGSq9S1H29+ybENWGNqesiavVPIreUsSU13RjI8T9u8YycMvXmm+1EZf0VIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"overview\"\n        title=\"\"\n        src=\"/static/a4772fea9c6f9ffbfc41104e7d2b91c9/5a190/clusters-overview.png\"\n        srcset=\"/static/a4772fea9c6f9ffbfc41104e7d2b91c9/772e8/clusters-overview.png 200w,\n/static/a4772fea9c6f9ffbfc41104e7d2b91c9/e17e5/clusters-overview.png 400w,\n/static/a4772fea9c6f9ffbfc41104e7d2b91c9/5a190/clusters-overview.png 800w,\n/static/a4772fea9c6f9ffbfc41104e7d2b91c9/c1b63/clusters-overview.png 1200w,\n/static/a4772fea9c6f9ffbfc41104e7d2b91c9/29007/clusters-overview.png 1600w,\n/static/a4772fea9c6f9ffbfc41104e7d2b91c9/c2d13/clusters-overview.png 2560w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Hope this helps,</p>\n<p>As always feel free to reach out to me if you have any questions about this post or how Red Hat Advanced Cluster Management for Kubernetes can help with managing your k8s fleet</p>\n<p>Thanks,\nRam</p>","id":"d2eebb5a-3cd0-56a2-bec2-211d427dd060","frontmatter":{"title":"Using Ansible to configure observability service in Red Hat Advanced Cluster Management for Kubernetes","date":"March 22, 2024","tags":["OpenShift","Platform","Kubernetes","Management"],"author":"Ram Gopinathan"},"fields":{"slug":"/observability-service-in-rhacm/"}}},{"node":{"excerpt":"In my current role I'm always having a ton of conversations with customers regarding Kubernetes fleet management and managing clusters at scale in hybrid cloud environments. While we have a lot of pre…","html":"<p>In my current role I'm always having a ton of conversations with customers regarding Kubernetes fleet management and managing clusters at scale in hybrid cloud environments. While we have a lot of pre-built demos at <a href=\"https://demo.redhat.com\">demo.redhat.com</a> I usually end up my building a lot of it myself because I can really make something thats very specific to a particular customer I'm working and its also easier to explain and walkthrough something you built v/s what someone else built.</p>\n<p>The way I use to install and configure before was by logging into OpenShift console and following installation instructions in our product documentation for Red Hat Advanced Cluster Management for Kubernetes. This started to become so time consuming and inefficient over time and I decided to use Ansible to automate installing and configuring ACM. Ansible is great at configuring infrastructure once its provisioned.</p>\n<p>Ansible community has created a collection for kubernetes, if you are not familiar with it please check out this <a href=\"https://docs.ansible.com/ansible/latest/collections/kubernetes/core/index.html#plugins-in-kubernetes-core\">documentation</a>. I'm using the k8s module from this collection which allows me to manage k8s objects on a kubernetes cluster.</p>\n<p>You can find everything I'm covering in this post here in this <a href=\"https://github.com/rprakashg-redhat/rhacm-demos/tree/main/install\">directory</a> of Github <a href=\"https://github.com/rprakashg-redhat/rhacm-demos\">repo</a>. You are welcome to use it at your own risk.</p>\n<p>To install and configure ACM I first login to the OpenShift cluster where I want to install ACM and then run this command <em><code class=\"language-text\">ansible-playbook install/install-configure-acm-playbook.yaml</code></em>. The Ansible playbook is pretty self explanatory so I wont go into too much details but at a high level what happens is as follows</p>\n<ul>\n<li>Load static variable values defined in yaml file.</li>\n<li>Extract pull secret that was used when cluster was installed.</li>\n<li>Write the data into a dynamic vars yaml file (I use .gitignore to exclude everything in dynamic vars directory so it doesn't get accidently checked in to Github).</li>\n<li>Load the dynamic variable values.</li>\n<li>Create open cluster management namespace.</li>\n<li>Create the operator group.</li>\n<li>Install ACM operator and wait for operator to be ready.</li>\n<li>With the pull secret that was extracted and saved into dynamic variable values file create a pull secret in open cluster management namespace for multi cluster hub.</li>\n<li>Create an instance of multi cluster hub and wait for the hub to be ready</li>\n<li>Install OpenShift GitOps Operator (ArgoCD) and wait for operator to be ready</li>\n</ul>\n<p><a href=\"https://asciinema.org/a/AQBvzRfPARRyRglJ8smO1FNZk\"><img src=\"https://asciinema.org/a/AQBvzRfPARRyRglJ8smO1FNZk.svg\" alt=\"asciicast\"></a></p>\n<p>Now we can switch back to Openshift console and refresh the console to check the status of ACM install and configuration. From the screen capture below you can see we now have RHACM all installed and configured</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ef5ca703521ae592cbc761e2f79bd62/45689/acm-install-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABeUlEQVR42pWOT0sbQRjG91sUUWO0apSqLaH3VqmBKkhprh489I8UqYdCj4mhggdB889GsypV4sFPYQ+aQr146rGXfoBsqruZ3ZnNr7OznnrSgR/P874P88xYpycnnDYaHB5+o1YpU93e4mC3xkHtK/Vqxfgju87xvk1tp0q5WKRSKlEuFWNu54gdfd9K9PbT35fgQU8fmex7Flc2+LhWZ7Vgs5Lb1d5mNb/H53WbpU+bLLzLkf1Q4LXm1XKB+bdrvHyTZ07rwvIXrJnMHM+mZ3k+/YLzn1eEQNANNSA10azlzseaevKUycdpRlKPaDabZum5N7rV49cfh8vfDr4QCM8llD5KE8ogRsXa1aoCnQUCa2IqzdDwGInkMOcXP+JCz0MqybUrcK49fD/AdTv8vfHoCJ9OR+idj4geusXXhSIqTI1PmsKBwREumnGhlJIwDOkalPERUoUopUz+P0EQmE9YyaFRBh+miPTs7LsJWq0W7Xb7XjiOY/gHmoPC3nkd4U0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhacm\"\n        title=\"\"\n        src=\"/static/4ef5ca703521ae592cbc761e2f79bd62/5a190/acm-install-result.png\"\n        srcset=\"/static/4ef5ca703521ae592cbc761e2f79bd62/772e8/acm-install-result.png 200w,\n/static/4ef5ca703521ae592cbc761e2f79bd62/e17e5/acm-install-result.png 400w,\n/static/4ef5ca703521ae592cbc761e2f79bd62/5a190/acm-install-result.png 800w,\n/static/4ef5ca703521ae592cbc761e2f79bd62/c1b63/acm-install-result.png 1200w,\n/static/4ef5ca703521ae592cbc761e2f79bd62/29007/acm-install-result.png 1600w,\n/static/4ef5ca703521ae592cbc761e2f79bd62/45689/acm-install-result.png 2249w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>If you have any questions please feel free to reach out.</p>\n<p>Hope that was helpful</p>\n<p>Thanks,\nRam</p>","id":"6fdcd152-8edc-549a-af62-e6dba93f28aa","frontmatter":{"title":"Using Ansible for installing and configuring Red Hat Advanced Cluster Management for Kubernetes (RHACM)","date":"March 22, 2024","tags":["OpenShift","Platform","Kubernetes","Management"],"author":"Ram Gopinathan"},"fields":{"slug":"/using-ansible-to-install-configure-rhacm/"}}}]}},"pageContext":{"limit":3,"skip":3,"numPages":14,"currentPage":2}},"staticQueryHashes":["1611934721","2366241629"],"slicesMap":{}}